import"./plugins3.js";import{l as t,g as e,a as o,b as r}from"./utils.js";import{a as n}from"./feature-flags.js";import{i as a,B as i,x as s}from"./lit-element.js";import{_ as l}from"./_rollupPluginBabelHelpers.js";import{E as c}from"./index5.js";import{g as d}from"./lazy-instantiator.js";import{t as u}from"./plugins.js";import"./colors.js";import"./icon.js";import"./typography.js";import{D as p}from"./d2l-practice.js";import"./icon-styles.js";import"./directive.js";import"./rtl-mixin.js";import"./common.js";import"./dedupeMixin.js";import"./unsafe-svg.js";import"./async-directive.js";import"./styles.js";import"./localize-mixin.js";import"./core.js";import"./index2.js";import"./if-defined.js";const f=t.debug("error-handler");f("Loading error-handler module.");const m=new Map([]);const y=[{oldName:"--primary",newName:"--d2l-cplus-color-primary"},{oldName:"--primary-dark",newName:"--d2l-cplus-color-primary-dark"},{oldName:"--neutral-one-head",newName:"--d2l-cplus-color-neutral-one-head"},{oldName:"--font-family-one",newName:"--d2l-cplus-font-family-one"}];const g=t.debug("setup:accordions");function b(t,e){try{if(!t)return g("setupAccordion did not receive an accordion.");if(1!==t.nodeType)return g("the received accordion is not a DOM element.");const o=document.createElement("d2l-cplus-accordion"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const n=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const a=t.parentNode.querySelector(".instruction");o.dataset.instructions=a?a.textContent:"";const i=t.querySelectorAll(".card"),s=[];for(const[t,e]of i.entries()){const o={id:t},r=e.querySelector(".card-title");o.title=r&&r.textContent?r.textContent:"";const n=e.querySelector(".card-body");o.content=n&&n.innerHTML?n.innerHTML:"",s.push(o)}o.dataset.type=r.dataType,o.dataset.panels=JSON.stringify(s),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){g("setupAccordion failed to create an element.",t)}}g("Loading accordions module.");const h=t.debug("setup:callouts");function w(t,e){h("Starting setupCalloutComponent.");try{if(!t)return h("setupCalloutComponent did not receive a callout element.");if(1!==t.nodeType)return h("the received callout element is not a DOM element.");const o=document.createElement("d2l-cplus-callout"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("section"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const n=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=t.parentNode.getAttribute("data-type");const a=t.querySelector(".card-text >*:nth-child(2), .jumbotron >*:nth-child(2)");o.dataset.content=JSON.stringify(a&&a.innerHTML?a.innerHTML:"");const i=t.querySelector(".card-text >*:first-child, .jumbotron >*:first-child");i.style.textTransform="none",o.dataset.title=i&&i.textContent?i.textContent:"",o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){h("setupCalloutComponent failed to create an element.",t)}}h("Loading callouts module.");const v=t.debug("setup:click-to-reveals");function x(t,e){v("Starting setupClickToRevealComponent.");try{if(!t)return v("setupClickToRevealComponent did not receive a click to reveal element.");if(1!==t.nodeType)return v("the received click to reveal element is not a DOM element.");const o=document.createElement("d2l-cplus-click-to-reveal"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("section"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const n=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=t.parentNode.getAttribute("data-type");const a=t.querySelector("button"),i=a?a.textContent:"";o.dataset.buttonRevealLabel=i.split("||").shift(),o.dataset.buttonHideLabel=i.split("||").pop();const s=t.querySelector(".card-text > p:first-of-type");o.dataset.introText=s?s.textContent:"";const l=t.querySelector(".card-text > p.instruction");o.dataset.instructions=l?l.textContent:"";const c=t.querySelector(".card-text > .collapse > div"),d=c&&c.innerHTML?c.innerHTML:"";o.dataset.revealedContent=JSON.stringify(d),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){v("setupClickToRevealComponent failed to create an element.",t)}}v("Loading click-to-reveals module.");const S=t.debug("setup:carousel");async function C(t,e){try{if(!t)return S("setupCarousel did not receive a carousel.");if(1!==t.nodeType)return S("the received carousel is not a DOM element.");const o=document.createElement("d2l-cplus-carousel"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const n=t.parentNode.querySelector(".sr-only");r.srOnlyId=n?n.getAttribute("aria-describedby"):"",r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const a=t.parentNode.querySelector(".instruction");o.dataset.instruction=a?a.textContent:"",t.parentNode.querySelector(".instruction").innerHTML="";const i=t.querySelectorAll(".d2l-cplus-carousel-slide"),s=[];for(const[t,e]of i.entries()){const o={id:t},r=e.querySelector(".d2l-cplus-carousel-slide-title");o.title=r&&r.textContent?r.textContent:"";const n=e.querySelector(".d2l-cplus-carousel-slide-image");if(n){const t=n.getAttribute("src"),e=n.getAttribute("alt");if(!t)return S("Could not find src attribute on image tag.");if("string"!=typeof t)return S("Value of src attribute was not a string.");o.image=t,o.alt=e||""}else o.image="",o.alt="";const a=e.querySelector(".d2l-cplus-carousel-slide-text");o.text=a&&a.innerHTML?a.innerHTML:"",s.push(o)}o.dataset.slides=JSON.stringify(s),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){S("setupCarousel failed to create an element.",t)}}S("Loading carousel module.");const A=t.debug("setup:flipcards");function N(t,e){A("Starting setupFlipcardsComponent.");try{if(!t)return A("setupFlipcardsComponent did not receive a flipcards element.");if(1!==t.nodeType)return A("the received flipcards element is not a DOM element.");const o=document.createElement("d2l-cplus-flipcards"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("section"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const n=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e;const a=t.parentNode.querySelector(".instruction");o.dataset.instructions=a?a.textContent:"",o.dataset.maxcards=t.getAttribute("data-maxcards");const i=t.querySelectorAll(".d2l-flip-card"),s=[];for(const t of i){const e=t.style.gridRowStart-1,o={},r=t.querySelector('.d2l-flip-card-front-body > *[data-flipcardprop*="frontCardTitle"]');o.frontTitle=r?r.textContent.trim():"";const n=t.querySelector(".d2l-flip-card-front-body p");o.frontText=n?n.textContent.trim():"";const a=t.querySelector(".d2l-flip-card-front img");o.frontImage={url:a?a.getAttribute("src"):"",alt:a?a.getAttribute("alt"):""};const i=t.querySelector('.d2l-flip-card-back-body > *[data-flipcardprop*="backCardTitle"]');o.backTitle=i?i.textContent.trim():"";const l=t.querySelector(".d2l-flip-card-back-body p");o.backText=l?l.textContent.trim():"";const c=t.querySelector(".d2l-flip-card-back img");o.backImage={url:c?c.getAttribute("src"):"",alt:c?c.getAttribute("alt"):""},s[e]||(s[e]=[]),s[e]=[...s[e],o]}o.dataset.rows=JSON.stringify(s),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){A("setupFlipcardsComponent failed to create an element.",t)}}A("Loading flipcards module.");const L=t.debug("lang-terms");async function j(t){if(!t)return L("Language code not found.");if("string"!=typeof t)return L("Language code is not a string.");const e=["ar","cy","da","de","en","es-es","es","fr-fr","fr-on","fr","hi-in","ja","ko","nl","pt","sv","tr","zh-cn","zh-tw"];let o="";o=e.indexOf(t)>-1?t:e.indexOf(t.split("-")[0])>-1?t.split("-")[0]:"en";try{return(await function(t){switch(t){case"../../../../lang/ar.js":return import("./ar10.js");case"../../../../lang/cy.js":return import("./cy10.js");case"../../../../lang/da.js":return import("./da10.js");case"../../../../lang/de.js":return import("./de10.js");case"../../../../lang/en-gb.js":return import("./en-gb9.js");case"../../../../lang/en.js":return import("./en10.js");case"../../../../lang/es-es.js":return import("./es-es9.js");case"../../../../lang/es.js":return import("./es10.js");case"../../../../lang/fr-fr.js":return import("./fr-fr9.js");case"../../../../lang/fr-on.js":return import("./fr-on8.js");case"../../../../lang/fr.js":return import("./fr10.js");case"../../../../lang/hi.js":return import("./hi10.js");case"../../../../lang/ja.js":return import("./ja10.js");case"../../../../lang/ko.js":return import("./ko10.js");case"../../../../lang/nl.js":return import("./nl10.js");case"../../../../lang/pt.js":return import("./pt10.js");case"../../../../lang/sv.js":return import("./sv10.js");case"../../../../lang/tr.js":return import("./tr10.js");case"../../../../lang/zh-cn.js":return import("./zh-cn9.js");case"../../../../lang/zh-tw.js":return import("./zh-tw10.js");default:return new Promise((function(e,o){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t)))}))}}(`../../../../lang/${o}.js`)).default}catch(t){return L("getLangTerms failed unexpectedly.",t)}}L("Loading lang-terms module.");const T=t.debug("image-conversion");async function q(t){if(!t)return T("Url for image not found.");if("string"!=typeof t)return T("Url for image is not a string");try{const e=await fetch(t);if(!e.ok)return T("Failed to get image.");const o=await e.blob();if(!(o instanceof Blob))return T("Not a blob.");const r=await function(t){const e=new FileReader;return new Promise(((o,r)=>{e.onerror=()=>{r(null)},e.onload=()=>{o(e.result)},e.readAsDataURL(t)}))}(o);return"string"!=typeof r?T("Image blob could not be read."):r}catch(t){return T("imageToBase64 failed unexpectedly.",t)}}T("Loading image-conversion module.");const D=t.debug("setup:hotspots");D("Loading hotspots module.");const O=t.debug("module");function k(t,e){O("Starting processStylizedQuoteComponent.");try{if(!t)return O("setupStylizedQuoteComponent did not receive a stylized quote element.");if(1!==t.nodeType)return O("the received stylized quote element is not a DOM element.");const o=document.createElement("d2l-cplus-stylized-quote"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("section"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const n=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=t.parentNode.getAttribute("data-type");const a=t.querySelector("blockquote > p");o.dataset.quotation=a&&a.textContent?a.textContent:"";const i=t.querySelector("blockquote > footer");o.dataset.attribution=i&&i.textContent?i.textContent:"",o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){O("setupStylizedQuoteComponent failed to create an element.",t)}}O("Loading quotes module.");const I=t.debug("setup:tabs");async function M(t,e){try{if(!t)return I("setupTabsWrapper did not receive a tabsWrapper.");if(1!==t.nodeType)return I("the received tabsWrapper is not a DOM element.");const o=document.createElement("d2l-cplus-tabs-container"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby"),o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const n=t.parentNode.querySelector(".instruction");o.dataset.instruction=n?n.textContent:"",t.parentNode.querySelector(".instruction").innerHTML="";const a=t.querySelectorAll(".list-group-item"),i=t.querySelectorAll(".tab-pane"),s=[];for(let t=0;t<a.length;t++){const o={id:e};let r=a[t].querySelectorAll('span[data-itemprop$="0"]')[0];if(!r&&a[t].hasAttribute("data-itemprop")){const e=a[t].getAttribute("data-itemprop");"0"===e.substr(e.length-1)&&(r=a[t])}o.title=r&&r.textContent?r.textContent:"";const n=a[t].querySelectorAll("img")[0];o.imageSrc=n&&n.getAttribute("src")?n.getAttribute("src"):"",o.imageAlt=n&&n.getAttribute("alt")?n.getAttribute("alt"):"",o.content=i[t]&&i[t].innerHTML&&""!==i[t].innerHTML.replace(/(<p[^>]+?>|<p>|<\/p>)/gi,"").trim()?i[t].innerHTML:"",s.push(o)}o.dataset.type=r.dataType,o.dataset.tabsData=JSON.stringify(s),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){I("setupTabsWrapper failed to create an element.",t)}}I("Loading tabs module.");const F=t.debug("setup:timelines");async function B(t,e){try{if(!t)return F("setupTimeline did not receive a timeline.");if(1!==t.nodeType)return F("the received timeline is not a DOM element.");const o=document.createElement("d2l-cplus-timeline"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby"),o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const n=t.querySelectorAll(".timeline-panel"),a=[];for(const[t,e]of n.entries()){const o={id:t},r=e.querySelector(".timeline-heading");o.title=r&&r.textContent?r.textContent:"";const n=e.querySelector(".timeline-body > [data-itemprop]");o.content=n&&n.innerHTML&&""!==n.innerHTML.replace(/(<p[^>]+?>|<p>|<\/p>)/gi,"").trim()?n.innerHTML:"",a.push(o)}o.dataset.type=r.dataType,o.dataset.panels=JSON.stringify(a),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){F("setupTimeline failed to create an element.",t)}}F("Loading timelines module.");const z=t.debug("elements");z("Loading elements module."),function(){const t=new FontFace("Lato","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-400.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-400.woff) format(woff)",{style:"normal",weight:"400"});document.fonts.add(t),t.load();const e=new FontFace("Lato","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-700.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-700.woff) format(woff)",{style:"normal",weight:"700"});document.fonts.add(e),e.load();const o=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Light.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Light.woff) format(woff)",{style:"normal",weight:"300"});document.fonts.add(o),o.load();const r=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Regular.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Regular.woff) format(woff)",{style:"normal",weight:"400"});document.fonts.add(r),r.load();const n=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Bold.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Bold.woff) format(woff)",{style:"normal",weight:"700"});document.fonts.add(n),n.load();const a=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-LightItalic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-LightItalic.woff) format(woff)",{style:"italic",weight:"300"});document.fonts.add(a),a.load();const i=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Italic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Italic.woff) format(woff)",{style:"italic",weight:"400"});document.fonts.add(i),i.load();const s=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-BoldItalic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-BoldItalic.woff) format(woff)",{style:"italic",weight:"700"});document.fonts.add(s),s.load()}();let H;const P=a(H||(H=(t=>t)`.d2l-cplus-layout{container-name:d2l-cplus-layout;container-type:inline-size;display:grid;grid-template-rows:auto;margin-block:0;margin-inline:calc(var(--d2l-cplus-size-base, 18px)*-1);min-height:30px;width:calc(100% + 2*var(--d2l-cplus-size-base, 18px))}.d2l-cplus-layout::after{clear:both;content:" ";display:block;height:0;visibility:hidden}.d2l-cplus-layout-column{padding-block:0;padding-inline:var(--d2l-cplus-size-base, 18px);word-wrap:break-word}.d2l-cplus-layout-half{grid-template-columns:repeat(2, 50%)}.d2l-cplus-layout-thirds{grid-template-columns:repeat(3, minmax(33%, 1fr))}.d2l-cplus-layout-one-third{grid-template-columns:minmax(33%, 1fr) minmax(66%, 1fr)}.d2l-cplus-layout-two-third{grid-template-columns:minmax(66%, 2fr) minmax(33%, 1fr)}.d2l-cplus-layout iframe{max-width:100%}@container d2l-cplus-layout (width <= 822px){.d2l-cplus-layout-column{padding-inline:var(--d2l-cplus-size-small-1, 12px)}.d2l-cplus-layout-column:first-of-type{padding-inline-start:var(--d2l-cplus-size-base, 18px)}.d2l-cplus-layout-column:last-of-type{padding-inline-end:var(--d2l-cplus-size-base, 18px)}}@container d2l-cplus-layout (width <= 546px){.d2l-cplus-layout-column{grid-column:1/-1;padding-inline:var(--d2l-cplus-size-base, 18px)}}
`)),E=t.debug("setup:layouts");async function U(t){E("Starting setupLayouts.");try{if(!t||t.length<1)return E("setupLayouts found no layouts.");for(const e of t)e.style.opacity=0;!function(){try{E("Stating addStyles.");const t=document.createElement("style");t.innerHTML=P.cssText,document.head.appendChild(t)}catch(t){E("addStyle failed unexpectedly.")}}()}catch(t){E("setupLayouts failed unexpectedly",t)}finally{for(const e of t)e.style.opacity=1}}E("Loading layouts module.");const J=t.debug("layouts");J("Loading layouts module.");const R=async function(t,e,o){const r={headers:{Authorization:`Bearer ${e}`}};try{const e=t.getLinkByRel("https://activity.api.brightspace.com/rels/assigned-activities");if(!e)return{};const a=new c(await(await fetch(e.href,r)).json()),i=a.getActionByName("create-assigned-activity");if(a.entities||(o=!0),i&&o){var n;const t={};i.fields.forEach((e=>{e.value&&(t[e.name]=e.value)}));const o=(await fetch(i.href,l({method:i.method,body:new URLSearchParams(t),headers:{"Content-Type":null!==(n=i.type)&&void 0!==n?n:"application/x-www-form-urlencoded;charset=UTF-8"}},r))).headers.get("Content-Location");return{attempt:new c(await(await fetch(o,r)).json()),assignedActivitiesList:e}}if(a.entities&&a.entities.length>0){return{attempt:new c(await(await fetch(a.entities[0].href,r)).json()),assignedActivitiesList:e}}}catch(t){return{}}};let $,Q,W=t=>t;customElements.define("d2l-practice-error",class extends p{static get styles(){return a($||($=W`
		:host {
			all: initial;
			color: #494c4e;
			display: inline-block;
			font-family: "Lato", sans-serif;
			font-size: 0.8rem;
			line-height: 1.5;
			overflow: hidden;
			width: 100%;
		}

		:host([hidden]) {
			display: none;
		}

		.d2l-error-contain {
			align-items: center;
			background-color: var(--d2l-color-celestine-plus-2);
			border: 1px solid var(--d2l-color-mica);
			border-radius: 6px;
			display: flex;
			flex-direction: column;
			justify-content: center;
			overflow: hidden;
			padding: 18px;
		}

		d2l-icon {
			margin-top: 0.83em;
		}`))}render(){return s(Q||(Q=W`
			<div class="d2l-error-contain">
				<d2l-icon icon="tier3:alert"></d2l-icon>
				<h2>${0}</h2>
			</div>
		`),this.localize("practice:learner:general:errorLoadingPractice"))}});const V=t.debug("practices");V("Loading practices.js"),window.D2L=window.D2L||{},window.D2L.Creator={convertElements:async function(t,o,r,a="False"){var i;if(z("Starting convertElements",a),JSON.parse(a.toLowerCase())&&t&&!(t.length<1)){var s;if(document.querySelector("html").setAttribute("data-mathjax-context",JSON.stringify({outputScale:1.5})),null!==(i=window)&&void 0!==i&&null!==(i=i.D2L)&&void 0!==i&&i.Pulse)o=null===(s=window)||void 0===s||null===(s=s.D2L)||void 0===s||null===(s=s.Pulse)||void 0===s?void 0:s.orgUnitId,r=await e(o);window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:o,OrgUnitPath:r},window.D2L.Creator.Flags=window.D2L.Creator.Flags||{},window.D2L.Creator.Flags.Elements=function(){let t;try{return t=n(m),t}catch(t){return m}}(),f("Registering error handler."),window.addEventListener("error",(t=>{f(`CPlusError: ${t.type}: ${t.message}`),t.stopPropagation(),t.preventDefault()})),function(){for(const t of y){const e=getComputedStyle(document.documentElement).getPropertyValue(t.oldName);e&&document.documentElement.style.setProperty(t.newName,e)}}(),async function(){I("Starting setupTabs.");const t=document.querySelectorAll(".d2l-element > .tabs-wrapper");if(!t||t.length<1)return I("setupTabs found no tabs.");try{for(const e of t)e.parentNode.style.opacity=0;await import("./tabs.js");for(const[e,o]of t.entries())M(o,e)}catch(t){I("setupTabs failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-element:not(.d2l-tabccordion) > .accordion");if(!t||t.length<1)return g("setupAccordions found no accordions.");for(const e of t)e.parentNode.style.opacity=0;await import("./accordion2.js");for(const[e,o]of t.entries())b(o,e)}catch(t){g("setupAccordions failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-element > .card.card-reveal");if(!t||t.length<1)return v("setupCardReveals found no click to reveals");for(const e of t)e.parentNode.style.opacity=0;await import("./click-to-reveal.js");for(const[e,o]of t.entries())x(o,e)}catch(t){v("setupCardReveals failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-flip-card-wrapper");if(!t||t.length<1)return A("setupFlipcards found no flipcards");for(const e of t)e.parentNode.style.opacity=0;await import("./flipcards.js");for(const[e,o]of t.entries())N(o,e)}catch(t){A("setupFlipcards failed unexpectedly",t)}}(),async function(){const t=document.querySelectorAll(".d2l-element > .card:not(.card-reveal), .d2l-element > .jumbotron");try{if(!t||t.length<1)return h("setupCallouts found no callouts");for(const e of t)e.parentNode.style.opacity=0;await import("./callout.js");for(const[e,o]of t.entries())w(o,e)}catch(t){h("setupCallouts failed unexpectedly",t)}finally{for(const e of t)e.parentNode.style.opacity=1}}(),async function(){F("Starting setupTimelines.");const t=document.querySelectorAll(".d2l-element .timeline");if(!t||t.length<1)return F("setupTimelines found no timelines.");try{for(const e of t)e.parentNode.parentNode.style.opacity=0;await import("./timeline.js");for(const[e,o]of t.entries())B(o,e)}catch(t){F("setupTimelines failed unexpectedly",t)}finally{const t=document.querySelectorAll("d2l-cplus-timeline");for(const e of t)e.parentNode.style.opacity=1}}(),async function(){D("Starting setupHotspots.");const t=document.querySelectorAll(".d2l-hotspot");try{const e=document.querySelector("html").hasAttribute("lang")?document.querySelector("html").getAttribute("lang"):"en-us",o=await j(e);if(o||D("Unable to get language terms."),"object"!=typeof o&&D("Unexpected value for langTerms object."),!t||t.length<1)return D("setupHotspots found no containers.");for(const e of t)e.parentNode.style.opacity=0;await import("./hotspot.js");for(const e of t)try{if(!e.getAttribute("data-properties"))return D("Could not find necessary data for the interactive.");const t={},r=e.closest(".d2l-element");t.dataIdx=r.getAttribute("data-idx"),t.dataType=r.getAttribute("data-type"),t.role=r.getAttribute("section"),t.ariaDescribedby=r.getAttribute("aria-describedby");const n=r.querySelector(".sr-only");t.srOnlyId=n?n.getAttribute("id"):"",t.srOnlyInnerText=n?n.textContent:"";const a=e.querySelector("img");if(!a)return D("Could not find required image tag.");const i=a.getAttribute("src");if(!i)return D("Could not find src attribute on image tag.");if("string"!=typeof i)return D("Value of src attribute was not a string.");const s=await q(i);if(!s)return D("Image could not be converted to Base64");let l;try{l=decodeURIComponent(window.atob(e.getAttribute("data-properties")))}catch(t){D("setupHotspots failed to decode string.",t),l=window.atob(e.getAttribute("data-properties"))}if("string"!=typeof l)return D("Value of data-properties attribute was not a string.");const c=document.createElement("d2l-cplus-hotspot");c.dataset.activity=l,c.dataset.image=s,c.dataset.langTerms=JSON.stringify(o),c.dataset.wrapper=JSON.stringify(t),c.setAttribute("data-rs-shadow-root",!0),e.parentNode.after(c),e.parentNode.remove()}catch(t){D("setupHotspots failed to create an element.",t)}}catch(t){D("setupHotspots failed unexpectedly",t)}finally{for(const e of t)e.parentNode.style.opacity=1}}(),async function(){try{const t=document.querySelectorAll(".d2l-cplus-carousel");if(!t||t.length<1)return S("setupCarousels found no carousels.");for(const e of t)e.parentNode.parentNode.style.opacity=0;await import("./carousel.js");for(const[e,o]of t.entries())C(o,e)}catch(t){S("setupCarousels failed unexpectedly",t)}finally{const t=document.querySelectorAll("d2l-cplus-carousel");for(const e of t)e.parentNode.style.opacity=1}}(),async function(){const t=document.querySelectorAll(".d2l-element > .blockquote");try{if(!t||t.length<1)return O("setupStylizedQuotes found no stylized quotes");for(const e of t)e.parentNode.style.opacity=0;await import("./stylized-quote.js");for(const[e,o]of t.entries())k(o,e)}catch(t){O("setupStylizedQuotes failed unexpectedly",t)}}()}},convertLayouts:function(t){J("Starting convertLayouts"),U(t)},convertPractices:async function(t,n,a){var i,s;if(V("Starting convertPractices."),!t||t.length<1)return;null!==(i=window)&&void 0!==i&&null!==(i=i.D2L)&&void 0!==i&&i.Pulse&&(n=null===(s=window)||void 0===s||null===(s=s.D2L)||void 0===s||null===(s=s.Pulse)||void 0===s?void 0:s.orgUnitId,a=await e(n)),window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:n,OrgUnitPath:a};const l=[];for(let e=0;e<t.length;e++){const o=t[e].querySelector("iframe[data-file]");if(o){const t=o.src||o.getAttribute("data-src"),e=new URLSearchParams(t).get("t");if(e){if(o.setAttribute("data-type",e),l.includes(e))continue;l.push(parseInt(e))}o.setAttribute("data-src",o.src),o.removeAttribute("src"),o.style.height=0}}for(const t of l){const e=document.querySelectorAll(`.d2l-practice iframe[data-type="${t}"]`);if(await o(t))for(const o of e){let e=o.getAttribute("data-file");if(e){e.includes("practice/")||(e=`practice/${e}`);try{const n=await fetch(`${window.D2L.Creator.Context.OrgUnitPath}${e}`).then((t=>t.json())),a=r(t),i=document.createElement(a);o.parentNode.appendChild(i),i.practiceData=n,i.setAttribute("data-rs-shadow-root",!0),o.remove()}catch(n){try{const n=await fetch(`${e}`).then((t=>t.json())),a=r(t),i=document.createElement(a);o.parentNode.appendChild(i),i.practiceData=n,i.setAttribute("data-rs-shadow-root",!0),i.setAttribute("practice-lor",""),o.remove()}catch(t){const e=document.createElement("d2l-practice-error");o.replaceWith(e)}}}}else for(const t of e)t.setAttribute("src",t.getAttribute("data-src")),t.removeAttribute("data-src"),t.style.height="auto"}},convertPracticeActivities:async function(o,r,n,a=!1){var s;const l=t.debug("practices-activities");if(l("Starting convertPracticeActivities."),!o||o.length<1)return;l(`convertPracticeActivities is converting ${o.length} Practice(s).`),o.forEach((t=>{const e=t.querySelector("iframe[data-file]");e&&(e.setAttribute("data-src",e.src),e.removeAttribute("src"),e.style.height=0)}));const p=u("practices-activity-display","registry");let f;p&&await p.getModule();const m=u("practices-activity-display","provider-framework-utils");var y;let g;m&&(f=await m.getModule()),null!==(s=window)&&void 0!==s&&null!==(s=s.D2L)&&void 0!==s&&s.Pulse&&(r=null===(y=window)||void 0===y||null===(y=y.D2L)||void 0===y||null===(y=y.Pulse)||void 0===y?void 0:y.orgUnitId,n=await e(r)),window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:r,OrgUnitPath:n};let b=!1;for(const t of o){const e=t.attributes["data-d2l-activity-href"].value,o=t.innerHTML,r=t.querySelector("iframe[data-file]");r&&r.remove();try{const r=`${e.split("?").shift()}?ou=${window.D2L.Creator.Context.OrgUnitId}`,n=c(await(await window.top.d2lfetch.fetch(`${r}`)).json());void 0===g&&(g=localStorage["D2L.Fetch.Tokens"]&&JSON.parse(localStorage["D2L.Fetch.Tokens"])["*:*:*"]&&JSON.parse(localStorage["D2L.Fetch.Tokens"])["*:*:*"].access_token||void 0);let s=n;const l=await d(n,g,window.D2L.Creator.Context.OrgUnitId);if(l){const t=await R(l,g,a);s=t&&t.attempt||s}const u=await f(s.links,{type:"practice-activity",token:g});if(void 0===u)b=!0,t.innerHTML=o;else{var h;const e=u&&(null!==(h=u.contentDoing)&&void 0!==h?h:u.contentPrimary)||null;e?i(e,t):(b=!0,t.innerHTML=o)}}catch(e){b=!0,t.innerHTML=o}}if(b){const t=document.querySelectorAll(".d2l-practice");window.D2L.Creator.convertPractices(t,r,n)}},wrapTables:function(t){if(t&&!(t.length<1))for(const e of t){const t=document.createElement("div"),o=e.parentNode;o.classList.contains("table-responsive")||(t.classList.add("table-wrapper"),o.insertBefore(t,e),t.appendChild(e))}}};export{j as g};
